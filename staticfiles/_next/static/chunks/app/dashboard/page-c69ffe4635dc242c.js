(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{590:function(e,t,r){Promise.resolve().then(r.bind(r,3360))},3360:function(e,t,r){"use strict";var s=r(7437),o=r(2265),n=r(9376),a=r(9636),i=r(9064),c=r(7648);t.default=()=>{var e;let[t,r]=(0,o.useState)(null),[l,d]=(0,o.useState)(!0),[h,m]=(0,o.useState)("not_submitted"),[u,x]=(0,o.useState)(null),p=(0,n.useRouter)(),g=[{name:"Bitcoin",symbol:"BTC",price:"$67,234.56",change:"+2.34%",changeColor:"text-green-500",key:"bitcoin"},{name:"Ethereum",symbol:"ETH",price:"$3,456.78",change:"+1.87%",changeColor:"text-green-500",key:"ethereum"},{name:"Ripple",symbol:"XRP",price:"$0.5234",change:"+1.23%",changeColor:"text-green-500",key:"ripple"},{name:"Stellar",symbol:"XLM",price:"$0.1123",change:"+0.89%",changeColor:"text-green-500",key:"stellar"},{name:"Tether",symbol:"USDT",price:"$1.00",change:"+0.01%",changeColor:"text-green-500",key:"usdt"},{name:"BNB",symbol:"BNB",price:"$543.21",change:"+1.45%",changeColor:"text-green-500",key:"bnb"},{name:"BNB Tiger",symbol:"BNBT",price:"$0.0045",change:"+15.67%",changeColor:"text-green-500",key:"bnb_tiger"}],f=async()=>{try{let e=await a.ZP.authenticatedRequest("".concat(a.ZP.getApiBaseUrl(),"/wallet/balance/"));if(e.ok){let t=await e.json();x(t.wallet)}}catch(e){console.error("Failed to fetch wallet balances:",e)}},k=e=>u&&u["".concat(e,"_balance")]||"0.00";return((0,o.useEffect)(()=>{(async()=>{try{let e=a.ZP.isAuthenticated();if(console.log("Is authenticated:",e),!e){console.log("Not authenticated - redirecting to home"),p.push("/");return}let t=a.ZP.getAccessToken();console.log("Access token exists:",!!t),console.log("Token preview:",t?t.substring(0,20)+"...":"No token");let s=await a.ZP.getProfile();console.log("User profile loaded successfully:",s),r(s),await f();try{let e=await a.ZP.getKYCStatus();m(e.status||"not_submitted")}catch(e){console.error("Failed to fetch KYC status:",e),m("not_submitted")}}catch(e){console.error("Authentication check failed:",e),console.error("Error details:",e instanceof Error?e.message:String(e)),a.ZP.getAccessToken()?(console.log("Token exists but profile fetch failed"),i.ZP.error("Failed to load user profile. Please try refreshing the page or log in again.")):(console.log("No access token found - redirecting to login"),i.ZP.error("Please log in to access the dashboard."),p.push("/auth/login"))}finally{d(!1)}})()},[p]),l)?(0,s.jsx)("div",{className:"min-h-screen bg-darkmode flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):t?(0,s.jsxs)("div",{className:"min-h-screen bg-darkmode flex flex-col",children:[(0,s.jsx)("nav",{className:"bg-section bg-opacity-20 border-b border-section border-opacity-20 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-xl font-bold text-white",children:["QFS ",(0,s.jsx)("span",{className:"text-green-500",children:"Vault Ledger"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[((null==t?void 0:t.email)==="admin@example.com"||(null==t?void 0:t.email)==="admin@admin.com"||(null==t?void 0:t.email)==="admin@qfsvaultledger.org")&&(0,s.jsxs)(c.default,{href:"/admin/kyc",className:"text-primary hover:text-white transition-colors flex items-center gap-2 px-3 py-1 border border-primary rounded-md hover:bg-primary hover:text-darkmode",children:[(0,s.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Admin"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("svg",{className:"w-6 h-6 text-white cursor-pointer hover:text-primary transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.73 21a2 2 0 01-3.46 0"})]}),(0,s.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"0"})]}),(0,s.jsx)(c.default,{href:"/profile",className:"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors cursor-pointer",children:(0,s.jsx)("span",{className:"text-darkmode font-semibold text-sm",children:null===(e=t.name)||void 0===e?void 0:e.charAt(0).toUpperCase()})})]})]})}),(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Total Balance"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-primary mb-4",children:["$",(()=>{if(!u)return"0.00";let e=0;return g.forEach(t=>{let r=parseFloat(k(t.key))*(({bitcoin:67234.56,ethereum:3456.78,ripple:.5234,stellar:.1123,usdt:1,bnb:543.21,bnb_tiger:.0045})[t.key]||0);e+=r}),e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})()]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:"verified"===h?(0,s.jsxs)("span",{className:"text-green-500 font-medium flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Verified"]}):"pending"===h?(0,s.jsxs)("span",{className:"text-yellow-500 font-medium flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Verification Pending"]}):"rejected"===h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-red-500 font-medium flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Verification Failed"]}),(0,s.jsx)(c.default,{href:"/verify",className:"bg-primary hover:bg-opacity-80 text-darkmode px-4 py-2 rounded-lg font-medium transition-colors",children:"Try Again"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-red-500 font-medium",children:"Not Verified"}),(0,s.jsx)(c.default,{href:"/verify",className:"bg-primary hover:bg-opacity-80 text-darkmode px-4 py-2 rounded-lg font-medium transition-colors",children:"Verify Now"})]})})]})}),(0,s.jsx)("div",{className:"px-6",children:(0,s.jsx)("hr",{className:"border-section border-opacity-20"})}),(0,s.jsx)("div",{className:"px-6 py-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:[(0,s.jsxs)("button",{onClick:()=>p.push("/support"),className:"flex flex-col items-center gap-2 p-2 md:p-4 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:[(0,s.jsx)("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,s.jsx)("span",{className:"text-white text-xs md:text-sm font-medium whitespace-nowrap",children:"Buy"})]}),(0,s.jsxs)("button",{onClick:()=>p.push("/send"),className:"flex flex-col items-center gap-2 p-2 md:p-4 bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:[(0,s.jsx)("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),(0,s.jsx)("span",{className:"text-white text-xs md:text-sm font-medium whitespace-nowrap",children:"Send"})]}),(0,s.jsxs)("button",{onClick:()=>p.push("/receive"),className:"flex flex-col items-center gap-2 p-2 md:p-4 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors",children:[(0,s.jsx)("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),(0,s.jsx)("span",{className:"text-white text-xs md:text-sm font-medium whitespace-nowrap",children:"Receive"})]}),(0,s.jsxs)("button",{onClick:()=>p.push("/support"),className:"flex flex-col items-center gap-2 p-2 md:p-4 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors",children:[(0,s.jsx)("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),(0,s.jsx)("span",{className:"text-white text-xs md:text-sm font-medium whitespace-nowrap",children:"Swap"})]}),(0,s.jsxs)("button",{onClick:()=>p.push("/support"),className:"flex flex-col items-center gap-2 p-2 md:p-4 bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors",children:[(0,s.jsx)("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),(0,s.jsx)("span",{className:"text-white text-xs md:text-sm font-medium whitespace-nowrap",children:"Link"})]})]})}),(0,s.jsxs)("div",{className:"px-6 py-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-6",children:"Redemption Center Appointments"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>p.push("/support"),className:"flex flex-col items-center gap-3 p-4 bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg hover:bg-opacity-20 transition-colors",children:[(0,s.jsx)("svg",{className:"w-8 h-8 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,s.jsx)("span",{className:"text-white text-sm font-medium text-center",children:"MedBed Appointment"})]}),(0,s.jsxs)("button",{onClick:()=>p.push("/support"),className:"flex flex-col items-center gap-3 p-4 bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg hover:bg-opacity-20 transition-colors",children:[(0,s.jsx)("svg",{className:"w-8 h-8 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,s.jsx)("span",{className:"text-white text-sm font-medium text-center",children:"Humanitarian Projects"})]}),(0,s.jsxs)("button",{onClick:()=>p.push("/support"),className:"flex flex-col items-center gap-3 p-4 bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg hover:bg-opacity-20 transition-colors",children:[(0,s.jsx)("svg",{className:"w-8 h-8 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),(0,s.jsx)("span",{className:"text-white text-sm font-medium text-center",children:"QFS Gold Card"})]}),(0,s.jsxs)("button",{onClick:()=>p.push("/support"),className:"flex flex-col items-center gap-3 p-4 bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg hover:bg-opacity-20 transition-colors",children:[(0,s.jsx)("svg",{className:"w-8 h-8 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,s.jsx)("span",{className:"text-white text-sm font-medium text-center",children:"Q-Phones"})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 px-6 pb-20",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-6",children:"Popular Crypto Assets"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map((e,t)=>(0,s.jsxs)("div",{className:"bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg p-4 hover:bg-opacity-20 transition-colors cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-white font-semibold",children:e.name}),(0,s.jsx)("p",{className:"text-muted text-sm",children:e.symbol})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-white font-semibold",children:e.price}),(0,s.jsx)("p",{className:"text-sm ".concat(e.changeColor),children:e.change})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"text-muted text-sm",children:"Your Balance:"}),(0,s.jsxs)("span",{className:"text-primary font-semibold",children:["$",k(e.key)]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-primary h-2 rounded-full",style:{width:"".concat(100*Math.random(),"%")}})})]},t))})]}),(0,s.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 bg-section bg-opacity-20 border-t border-section border-opacity-20 px-6 py-4 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex justify-around md:justify-between items-center max-w-md md:max-w-full mx-auto md:mx-6",children:[(0,s.jsxs)(c.default,{href:"/profile",className:"flex flex-col items-center gap-1 text-muted hover:text-white transition-colors",children:[(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("span",{className:"text-xs",children:"Settings"})]}),(0,s.jsxs)("button",{className:"flex flex-col items-center gap-1 text-muted hover:text-white transition-colors",children:[(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.73 21a2 2 0 01-3.46 0"})]}),(0,s.jsx)("span",{className:"text-xs",children:"Notifications"})]}),(0,s.jsxs)(c.default,{href:"/dashboard",className:"flex flex-col items-center gap-1 text-muted hover:text-white transition-colors",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),(0,s.jsx)("span",{className:"text-xs",children:"Wallet"})]}),(0,s.jsxs)("button",{onClick:()=>p.push("/support"),className:"flex flex-col items-center gap-1 text-muted hover:text-white transition-colors",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{className:"text-xs",children:"Support"})]}),(0,s.jsxs)("button",{onClick:()=>{a.ZP.logout(),i.ZP.success("Logged out successfully"),p.push("/")},className:"flex flex-col items-center gap-1 text-muted hover:text-red-400 transition-colors",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("span",{className:"text-xs",children:"Logout"})]})]})})]}):null}},9636:function(e,t,r){"use strict";r.d(t,{CT:function(){return s}});let s="".concat("https://www.qfsvaultledger.org","/api");class o{handleApiError(e,t){let r="An unexpected error occurred";throw t.error?r=t.error:t.message?r=t.message:t.detail?r=t.detail:400===e.status?r="Invalid request. Please check your input.":401===e.status?r="Invalid credentials. Please check your email and password.":403===e.status?r="Access denied. Your account may be disabled.":404===e.status?r="User not found. Please check your email or sign up.":409===e.status?r="Email already exists. Please use a different email.":e.status>=500&&(r="Server error. Please try again later."),Error(r)}async register(e){try{let t=await fetch("".concat(s,"/auth/register/"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify(e)}),r=await t.json();return t.ok||this.handleApiError(t,r),this.storeTokens(r.tokens),r}catch(e){if("TypeError"===e.name&&e.message.includes("fetch"))throw Error("Network error. Please check your connection and try again.");throw e}}async login(e){try{let t=await fetch("".concat(s,"/auth/login/"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify(e)}),r=await t.json();return t.ok||this.handleApiError(t,r),this.storeTokens(r.tokens),r}catch(e){if("TypeError"===e.name&&e.message.includes("fetch"))throw Error("Network error. Please check your connection and try again.");throw e}}async getProfile(){let e=await this.authenticatedRequest("".concat(s,"/auth/profile/")),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to get user profile");return t.user}storeTokens(e){localStorage.setItem("access_token",e.access),localStorage.setItem("refresh_token",e.refresh)}getAccessToken(){return localStorage.getItem("access_token")}getRefreshToken(){return localStorage.getItem("refresh_token")}isAuthenticated(){return!!this.getAccessToken()}logout(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}async refreshToken(){let e=this.getRefreshToken();if(!e)throw Error("No refresh token found");let t=await fetch("".concat(s,"/token/refresh/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})}),r=await t.json();if(!t.ok)throw Error("Failed to refresh token");return localStorage.setItem("access_token",r.access),r.access}async authenticatedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getAccessToken();if(!r)throw Error("No access token found");let s={Authorization:"Bearer ".concat(r),...t.headers};t.body instanceof FormData||(s["Content-Type"]="application/json");let o=await fetch(e,{...t,headers:s});if(401===o.status)try{r=await this.refreshToken();let s={Authorization:"Bearer ".concat(r),...t.headers};t.body instanceof FormData||(s["Content-Type"]="application/json"),o=await fetch(e,{...t,headers:s})}catch(e){console.warn("Token refresh failed, but keeping user logged in:",e)}return o}async changePassword(e){let t=await this.authenticatedRequest("".concat(s,"/auth/change-password/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:e.currentPassword,new_password:e.newPassword})}),r=await t.json();if(!t.ok)throw Error(r.error||"Failed to change password");return r}async submitKYCDocument(e){let t=await this.authenticatedRequest("".concat(s,"/kyc/submit/"),{method:"POST",body:e}),r=await t.json();if(!t.ok)throw Error(r.error||"Failed to submit document");return r}async getKYCStatus(){let e=await this.authenticatedRequest("".concat(s,"/kyc/status/")),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to get KYC status");return t}async getAdminKYCList(){let e=await this.authenticatedRequest("".concat(s,"/admin/kyc/")),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to get KYC submissions");return t}async requestPasswordReset(e){try{let t=await fetch("".concat(s,"/auth/forgot-password/"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({email:e})}),r=await t.json();return t.ok||this.handleApiError(t,r),r}catch(e){if("TypeError"===e.name&&e.message.includes("fetch"))throw Error("Network error. Please check your connection and try again.");throw e}}async resetPassword(e,t){try{let r=await fetch("".concat(s,"/auth/reset-password/"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({token:e,password:t})}),o=await r.json();return r.ok||this.handleApiError(r,o),o}catch(e){if("TypeError"===e.name&&e.message.includes("fetch"))throw Error("Network error. Please check your connection and try again.");throw e}}async reviewKYCSubmission(e,t,r){let o=await this.authenticatedRequest("".concat(s,"/admin/kyc/").concat(e,"/review/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t,notes:r})}),n=await o.json();if(!o.ok)throw Error(n.error||"Failed to review KYC submission");return n}getApiBaseUrl(){return s}}let n=new o;t.ZP=n}},function(e){e.O(0,[972,279,971,117,744],function(){return e(e.s=590)}),_N_E=e.O()}]);